"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[64],{6064:(Ut,y,s)=>{s.r(y),s.d(y,{FacturarModule:()=>Lt});var f=s(9808),U=s(9826),P=s(2155),r=s(3075),S=s(1079),T=s(7423),_=s(9224),E=s(4834),F=s(7322),Z=s(5245),w=s(7531),A=s(4623),k=s(773),I=s(4107),c=s(2075),b=s(7238),M=s(2120),d=s(3585),t=s(5e3),R=s(5226),C=s.n(R),O=s(7655),L=s(8966),p=s(7093);function D(i,n){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"img",3),t.qZA())}function q(i,n){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA())}function J(i,n){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"img",5),t.qZA())}let j=(()=>{class i{constructor(e){this.dialogRef=e}onNoClick(){this.dialogRef.close()}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(L.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-imagenes-tickets"]],decls:5,vars:0,consts:[["fxLayoutAlign","center center"],["ngbSlide",""],[1,"picsum-img-wrapper"],["src","assets/images/img/BoletoEBSA.png","alt","TICKET",2,"height","22rem"],["src","assets/images/img/BoletoCASCO.png","alt","TICKET",2,"height","22rem"],["src","assets/images/img/boletonuevo.jpg","alt","TICKET",2,"height","22rem"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"ngb-carousel"),t.YNc(2,D,2,0,"ng-template",1),t.YNc(3,q,2,0,"ng-template",1),t.YNc(4,J,2,0,"ng-template",1),t.qZA()())},directives:[p.Wh,d.uo,d.xl],styles:[""]}),i})();var h=s(2340),V=s(3927),Y=s(6930),N=s(520);let Q=(()=>{class i extends V.Id{constructor(e,o){super(e.ClienteUrl,o),this.config=e,this.endpointPublic=h.N.endpointPublic}getClientePorRFC(e){return this.http.get(`${this.endpointPublic}/${e}`)}GetDomicilioPorCodigoPostal(e){return this.http.get(`${this.endpointPublic}/Domicilio/${e}`)}GetTicketPorFolio(e){return this.http.get(`${this.endpointPublic}/Ticket/${e}`)}Facturar(e){return this.http.post(`${this.endpointPublic}/Facturacion`,e)}contactanos(e){return this.http.post(`${this.endpointPublic}/contactanos`,e)}activar(){return this.http.get(`${this.endpointPublic}/test/en`)}reenviar(e){return this.http.get(`${this.endpointPublic}/reenviarfactura/${e}`)}consultaRegimenesFiscales(e){return this.http.get(`${this.endpointPublic}/regimenfiscal/list?tipoPersona=${e}`)}consultaUsoCFDI(e){return this.http.get(`${this.endpointPublic}/usocfdi/list?regimenId=${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Y._),t.LFG(N.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var $=s(5178),z=s(508);function B(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-item",2)(1,"div",3)(2,"div",4)(3,"div",5),t._uU(4,"Factura "),t.qZA(),t.TgZ(5,"div",6)(6,"button",7),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().remove(l)}),t.TgZ(7,"mat-icon",8),t._uU(8,"delete"),t.qZA()()()(),t.TgZ(9,"div",9)(10,"b"),t._uU(11,"Folio:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div",10)(14,"b"),t._uU(15,"RFC:"),t.qZA(),t._uU(16),t.TgZ(17,"b"),t._uU(18,"Fecha:"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",11),t._uU(21),t.qZA(),t.TgZ(22,"div",11)(23,"b"),t._uU(24,"Forma de pago:"),t.qZA(),t._uU(25),t.qZA(),t.TgZ(26,"div",11)(27,"b"),t._uU(28,"Importe:"),t.qZA(),t._uU(29),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(12),t.hij("\xa0 ",e.folio," "),t.xp6(4),t.hij("\xa0 ",e.rfcEmisor," \xa0 "),t.xp6(3),t.hij("\xa0",e.fechaHora," "),t.xp6(2),t.hij(" ",e.descripcion," "),t.xp6(4),t.hij("\xa0 ",e.tipoPago," "),t.xp6(4),t.hij("\xa0$",e.importe," ")}}let H=(()=>{class i{constructor(){this.Ticketsout=new t.vpe,this.listaTickets=[],this.arrayTickets=[]}ngOnInit(){console.log(this.Tickets)}ngOnChanges(e){e.Tickets.currentValue&&(this.listaTickets=e.Tickets.currentValue)}remove(e){C().fire({title:"Atenci\xf3n",text:"\xbfConfirma que desea eliminar el folio "+e.folio+"?",icon:"info",showCancelButton:!0,confirmButtonColor:"#FF4713",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar"}).then(o=>{o.isConfirmed&&(this.listaTickets=this.listaTickets.filter(a=>a.folio!=e.folio),this.Ticketsout.emit(this.listaTickets))})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lista-facturas"]],inputs:{Tickets:"Tickets"},outputs:{Ticketsout:"Ticketsout"},features:[t.TTD],decls:3,vars:1,consts:[["fxFlex","95","fxLayout","column",1,"mt-2","ml-2"],["class","h-52",4,"ngFor","ngForOf"],[1,"h-52"],["fxLayout","column"],["fxLayout","row",1,"mrgntop"],["fxFlex","70","fxLayoutAlign","start center",1,"text-2xl","font-semibold"],["fxFlex","30","fxLayoutAlign","end center"],["mat-icon-button","",3,"click"],[1,"colorOrange"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"text-md","font-medium","tracking-tight","leading-tight"],[1,"font-medium","text-md"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-list"),t.YNc(2,B,30,6,"mat-list-item",1),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",o.listaTickets))},directives:[_.a8,p.yH,p.xw,A.i$,f.sg,A.Tg,p.Wh,T.lW,Z.Hw],styles:[".mat-list-icon[_ngcontent-%COMP%]{color:#0000008a}.colorOrange[_ngcontent-%COMP%]{color:#ff4713}.mat-list-item[_ngcontent-%COMP%]{font-size:11px!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:11px!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item.mat-multi-line[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option.mat-multi-line[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-item-content[_ngcontent-%COMP%]{padding:0!important}.demo-2[_ngcontent-%COMP%]{font-size:2vw!important}p[_ngcontent-%COMP%]{margin-bottom:0!important}.ml12[_ngcontent-%COMP%]{margin-left:19rem}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%]{padding:0 4px!important}.mat-list-item[_ngcontent-%COMP%]{font-size:13px!important}"]}),i})();function G(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar una raz\xf3n social "),t.qZA())}function X(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar un correo electr\xf3nico "),t.qZA())}function K(i,n){if(1&i&&(t.TgZ(0,"mat-option",101),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(0!=e.id?e.id+" - "+e.descripcion:"-"+e.descripcion+"-")}}function W(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario seleccionar un Regimen Fiscal"),t.qZA())}function tt(i,n){if(1&i&&(t.TgZ(0,"mat-option",101),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.id+" - "+e.descripcion)}}function et(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario seleccionar un uso del cfdi "),t.qZA())}function ot(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario seleccionar un regimen fiscal "),t.qZA())}function it(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar el pa\xeds "),t.qZA())}function at(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar un estado "),t.qZA())}function nt(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar un municipio "),t.qZA())}function rt(i,n){if(1&i&&(t.TgZ(0,"mat-option",101),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e.nombre," ")}}function lt(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario ingresar una calle "),t.qZA())}function st(i,n){if(1&i&&(t.TgZ(0,"div",102),t._UZ(1,"img",103),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.s9C("src",e.rutaimegenes+"ticket.png",t.LSH)}}function ct(i,n){if(1&i&&(t.TgZ(0,"mat-option",101),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.tipopago),t.xp6(1),t.Oqu(e.name)}}function mt(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Es necesario seleccionar un tipo Tarjeta "),t.qZA())}function ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",104)(1,"mat-label"),t._uU(2," Tipo Tarjeta: "),t.qZA(),t.TgZ(3,"mat-select",105),t.NdJ("selectionChange",function(a){return t.CHM(e),t.oxw().tipoTajertaSeleccionada(a)}),t.YNc(4,ct,2,2,"mat-option",26),t.qZA(),t.YNc(5,mt,2,0,"mat-error",20),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.TipoTarjeta),t.xp6(1),t.Q6J("ngIf",e.form2.controls.tipoPago.invalid)}}function ft(i,n){1&i&&(t.TgZ(0,"th",106),t._uU(1,"Folio"),t.qZA())}function dt(i,n){if(1&i&&(t.TgZ(0,"td",107),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.folio," ")}}function pt(i,n){1&i&&(t.TgZ(0,"th",106),t._uU(1," Fecha/Hora "),t.qZA())}function ht(i,n){if(1&i&&(t.TgZ(0,"td",107),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.fechaTicket,"dd/MM/yyyy hh:mm")," ")}}function gt(i,n){1&i&&(t.TgZ(0,"th",106),t._uU(1," Descripci\xf3n "),t.qZA())}function xt(i,n){if(1&i&&(t.TgZ(0,"td",107),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.descripcion," ")}}function Ct(i,n){1&i&&(t.TgZ(0,"th",106),t._uU(1," Forma de Pago "),t.qZA())}function vt(i,n){if(1&i&&(t.TgZ(0,"td",107),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.tipoPago," ")}}function Ft(i,n){1&i&&(t.TgZ(0,"th",108),t._uU(1," Importe "),t.qZA())}function Tt(i,n){if(1&i&&(t.TgZ(0,"td",109),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.importe," ")}}function _t(i,n){1&i&&t._UZ(0,"th",110)}function Zt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",109)(1,"button",111),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().remove(l)}),t._UZ(2,"mat-icon",112),t.qZA()()}}function At(i,n){1&i&&t._UZ(0,"tr",113)}function yt(i,n){1&i&&t._UZ(0,"tr",114)}function Pt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",115)(2,"div",116)(3,"div",29),t._UZ(4,"img",117)(5,"br"),t.TgZ(6,"div",118),t._UZ(7,"div")(8,"div")(9,"div")(10,"div")(11,"div")(12,"div")(13,"div")(14,"div"),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(4),t.s9C("src",e.rutaimegenes+"logo2.png",t.LSH)}}let wt=(()=>{class i{constructor(e,o,a,l,m,u){this.clienteService=o,this.CurrenciPipe=a,this.dialog=l,this._fuseConfigService=m,this.locale=u,this.USOCFDI=[{code:"G03",name:"Gastos en general"},{code:"P01",name:"Por definir"}],this.TipoTarjeta=[{tipopago:"tarjeta de debito",name:"Tarjeta de D\xe9bito"},{tipopago:"NetPay",name:"Tarjeta de Cr\xe9dito"}],this.mostrarTipoTarjeta=!1,this.dataSource=new c.by,this.myControl=new r.NI,this.spinner=!1,this.options=["Opcion 1","Opcion 2","Opcion 3"],this.Activo="",this.displayedColumns=["folio","fecha","descripcion","pago","importe","acciones"],this.tickeInpo=[],this.satregimentesArray=[],this.satUsoCfdiArray=[],this.tooltipRegimen="",this.tooltipUsoCfdi="",this.rutaimegenes=h.N.rutaimagenes,this.colorPrincipal=h.N.colorPrincipalhexa,this.tieneLineaCredito=0,this.Modelo=null,this.isRFCLoad=!1,this.isCpLoad=!1,this.colonias=[],this.CvePaisCP="",this.CveEstadoCP="",this.CveMunicipioCP="",this.CveLocalidadCP="",this.CveColoniaCP="",this.listadoTickets=[],e.interval=5e3,e.wrap=!1,e.keyboard=!1,e.pauseOnHover=!1,console.log("Locale actual:",this.locale),console.log(h.N.env),this.activar(),this.setTheme(h.N.tema)}ngOnInit(){this.inicializarForm(),"AeroContaxi"==h.N.nombre?this.TipoTarjeta=[{tipopago:"tarjeta de debito",name:"Tarjeta de D\xe9bito"},{tipopago:"NetPay",name:"Tarjeta de Cr\xe9dito"}]:"Dgas"==h.N.nombre&&(this.TipoTarjeta=[{tipopago:"01",name:"01-EFECTIVO"},{tipopago:"03",name:"03-TRANSFERENCIA ELECTRONICA DE FONDOS"},{tipopago:"04",name:"04-TARJETA DE CR\xc9DITO"},{tipopago:"28",name:"28-TARJETA DE D\xc9BITO"}]);let e=new Date;console.log(e.toISOString())}setTheme(e){this._fuseConfigService.config={theme:e}}activar(){this.clienteService.activar().subscribe(e=>{this.Activo=e,console.log(this.Activo)})}consultaRegimen(){let e=2,o=this.form.controls.RFC.value.length;12==o?e=1:13==o&&(e=0),this.clienteService.consultaRegimenesFiscales(e).subscribe(a=>{this.satregimentesArray=a,this.satregimentesArray.unshift({id:0,descripcion:"seleccionar"}),this.form.controls.regimenfiscal.setValue(this.satregimentesArray[0]),this.satUsoCfdiArray=[]})}consultaUso(e=0){let o;o=0!=e?this.form.controls.regimenfiscal.value.id:e,null!=this.form.controls.regimenfiscal.value.id&&(this.tooltipRegimen=this.form.controls.regimenfiscal.value.id+" - "+this.form.controls.regimenfiscal.value.descripcion),this.tooltipRegimen="",this.clienteService.consultaUsoCFDI(o).subscribe(a=>{if(this.satUsoCfdiArray=a,this.satUsoCfdiArray.unshift({id:"",descripcion:"seleccionar"}),localStorage.getItem("Usog")){let l=JSON.parse(localStorage.getItem("Usog")),m=this.satUsoCfdiArray.find(u=>u.id==l);this.form.controls.usoCFDI.setValue(m),localStorage.removeItem("Usog")}else this.form.controls.usoCFDI.setValue(this.satUsoCfdiArray[0]);this.cambiouso()})}cambiouso(){this.tooltipUsoCfdi=null!=this.form.controls.usoCFDI.value.id?this.form.controls.usoCFDI.value.id+" - "+this.form.controls.usoCFDI.value.descripcion:""}inicializarForm(){this.form=new r.cw({bucadorRFC:new r.NI(""),RazonSocial:new r.NI("",[r.kI.required]),RFC:new r.NI("",[r.kI.required,r.kI.maxLength(13),r.kI.minLength(12)]),CodigoPostal:new r.NI("",[r.kI.required]),Pais:new r.NI("",[r.kI.required]),Estado:new r.NI("",[r.kI.required]),Municipio:new r.NI("",[r.kI.required]),Localidad:new r.NI(""),Colonia:new r.NI("",[]),Calle:new r.NI("",[r.kI.required]),numeroExterior:new r.NI("",[r.kI.required]),numeroInterior:new r.NI(""),email:new r.NI("",[r.kI.required,r.kI.email]),regimenfiscal:new r.NI("",[r.kI.required]),usoCFDI:new r.NI("",[r.kI.required])}),this.form2=new r.cw({FolioAFacturar:new r.NI(""),MontoAFacturar:new r.NI(""),tipoPago:new r.NI("-1")}),this.consultaRegimen(),this.consultaUso()}guardar(){if(null==this.form.controls.regimenfiscal.value.id||null==this.form.controls.regimenfiscal.value.id||0==this.form.controls.regimenfiscal.value.id)return void this.infoAlert("Es necesario seleccionar un regimen fiscal");if(null==this.form.controls.usoCFDI.value.id||null==this.form.controls.usoCFDI.value.id||""==this.form.controls.usoCFDI.value.id)return void this.infoAlert("Es necesario seleccionar un uso CFDI");let e=this.form2.controls.tipoPago.value;if(this.mostrarTipoTarjeta&&(null==e||null==e))return this.infoAlert("Es necesario seleccionar el tipo tarjeta"),this.form2.controls.tipoPago.setValidators([r.kI.required]),void this.form2.controls.tipoPago.updateValueAndValidity();if(this.form2.controls.tipoPago.clearValidators(),this.form2.controls.tipoPago.updateValueAndValidity(),this.dataSource.data.length>0){let a=this.dataSource.data[0].metodoPago;if(this.tieneLineaCredito<=0&&"CREDITO"==a)return void this.infoAlert("El cliente ingresado no cuenta con una l\xednea de cr\xe9dito asignada. \n\n\t\t   ")}if(this.spinner=!0,this.form.valid&&this.dataSource.data.length>0){let a=[];this.dataSource.data.forEach(l=>{a.push({Code:l.folio,Importe:l.importe,Rfc:l.rfC_Emisor,TipoPago:l.tipoPago,Precio:null==l.precio?0:l.precio,Cantidad:l.cantidad,ProveedorTicket:l.proveedorTicket})});var o={ClienteId:null==this.Modelo?0:this.Modelo.clientID,AddressId:null==this.Modelo?0:this.Modelo.addressId,RazonSocial:this.form.controls.RazonSocial.value,RFC:this.form.controls.RFC.value,RegimenFiscal:this.form.controls.regimenfiscal.value.id+"-"+this.form.controls.regimenfiscal.value.descripcion,CodigoPostal:this.form.controls.CodigoPostal.value,UsoCFDI:this.form.controls.usoCFDI.value.id,Pais:this.form.controls.Pais.value,CvePais:"MEX",Estado:this.form.controls.Estado.value,CveEstado:""!=this.CveEstadoCP?this.CveEstadoCP:this.Modelo.cveEstado,Municipio:this.form.controls.Municipio.value,CveMunicipio:""!=this.CveMunicipioCP?this.CveMunicipioCP:this.Modelo.cveMunicipio,Localidad:null==this.form.controls.Localidad.value?"":this.form.controls.Localidad.value,CveLocalidad:""!=this.CveLocalidadCP?this.CveLocalidadCP:"",Colonia:null==this.form.controls.Colonia.value?"":this.form.controls.Colonia.value.nombre,CveColonia:null==this.Modelo?this.CveColoniaCP:this.Modelo.cveColonia,Calle:this.form.controls.Calle.value,NumeroExterior:this.form.controls.numeroExterior.value,NumeroInterior:this.form.controls.numeroInterior.value,Correo:this.form.controls.email.value,tickets:a};console.log(o),this.clienteService.Facturar(o).subscribe(l=>{null!=l&&(this.downLoadFile(l.pdf,"application/pdf;base64",".pdf",l.nombre),this.downLoadFile(l.xml,"aplication/xml;base64",".xml",l.nombre),this.reset(),this.alertWithSuccess("Facturado"),this.spinner=!1)},l=>{this.dataSource.data=[],this.dataSource=new c.by(this.dataSource.data),console.log(l),l.error.toString().includes("errorsociedadmercantil")?this.infoAlert("Ha ocurrido un problema al facturar: El campo Nombre del Receptor debe pertenecer al nombre asociado al RFC registrado en el campo RFC del receptor. Intente de nuevo removiendo la sociedad mercantil de la raz\xf3n social,  pueden ser: S.A, C.V, S. de R.L etc. "):l.error.toString().includes("El campo DomicilioFiscalReceptor del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor.")?this.infoAlert("El campo DomicilioFiscalReceptor del receptor, debe pertenecer al nombre asociado al RFC registrado en el campo Rfc del Receptor."):l.error.toString().includes("Ocurri\xf3 un problema al facturar en la versi\xf3n SAT 4.0. \n Favor de verificar su informaci\xf3n fiscal.")?this.infoAlert("Ocurri\xf3 un problema al facturar en la versi\xf3n SAT 4.0. \n Favor de verificar su informaci\xf3n fiscal."):this.infoAlert("Ha ocurrido un error al facturar"),this.spinner=!1})}else this.form.valid?this.dataSource.data.length<=0&&(this.infoAlert("Es necesario agregar folios"),this.spinner=!1):(this.form.markAllAsTouched(),this.infoAlert("Es necesario completar el formulario"),this.spinner=!1)}reset(){this.form.reset(),this.form2.reset(),this.dataSource.data=[],this.dataSource=new c.by(this.dataSource.data),this.colonias=[],this.CvePaisCP="",this.CveEstadoCP="",this.CveMunicipioCP="",this.CveLocalidadCP="",this.CveColoniaCP=""}ConsultarRFC(e=0,o=!1){this.form.controls.RFC.invalid||(1==e&&this.form.controls.bucadorRFC.setValue(this.form.controls.RFC.value),this.form.controls.bucadorRFC.value.length>3&&this.clienteService.getClientePorRFC(this.form.controls.bucadorRFC.value.toString().trim()).subscribe(a=>{console.log(a);var l=this.form.controls.bucadorRFC.value;if(0==e&&(this.form.reset(),this.form.controls.bucadorRFC.setValue(l)),null!=a&&null!=a){if(this.Modelo=a,this.isRFCLoad=!0,this.colonias.push({clave:"0",codigoPostal:"0",estado:null,id:"0",nombre:a.colonia}),this.tieneLineaCredito=a.lineaC_ID,this.dataSource.data.length>0){let x=this.dataSource.data[0].metodoPago;if(-1==this.tieneLineaCredito&&"CREDITO"==x)return void this.infoAlert("El cliente ingresado no cuenta con una l\xednea de cr\xe9dito asignada. \n\n\t\t Favor de comunicarse al correo:  ")}let m;this.form.controls.RazonSocial.setValue(a.razonSocial),this.form.controls.RFC.setValue(a.rfc),this.form.controls.CodigoPostal.setValue(a.codigoPostal),this.form.controls.Pais.setValue(a.pais),this.form.controls.Estado.setValue(a.estado),this.form.controls.Municipio.setValue(a.municipio),this.form.controls.Localidad.setValue(a.localidad),this.form.controls.Colonia.setValue(this.colonias[0]),this.form.controls.Calle.setValue(a.calle),this.form.controls.numeroExterior.setValue(a.numeroExterior),this.form.controls.numeroInterior.setValue(a.numeroInterior),this.form.controls.email.setValue(a.email),m=a.regimenFiscal.toString().split("-");let g,u=0;m.length>1&&(u=m[0].toString().trim(),g=this.satregimentesArray.find(x=>x.id==u),this.form.controls.regimenfiscal.setValue(g)),localStorage.setItem("Usog",JSON.stringify(a.usodelCFDI)),this.consultaUso(this.form.controls.regimenfiscal.value.id),this.CveEstadoCP="",this.CveMunicipioCP="",this.CveLocalidadCP="",this.CveColoniaCP="",1==e&&this.form.controls.bucadorRFC.setValue("")}else this.isRFCLoad=!1,o&&this.infoAlert("El RFC no se encuentra registrado."),1==e&&this.form.controls.bucadorRFC.setValue("")}))}GetDomicilio(){this.form.controls.CodigoPostal.value.length>3&&(this.spinner=!0,this.clienteService.GetDomicilioPorCodigoPostal(this.form.controls.CodigoPostal.value).subscribe(e=>{console.log(e);var o=this.form.controls.CodigoPostal.value;this.form.controls.Pais.setValue(""),this.form.controls.Estado.setValue(""),this.form.controls.Municipio.setValue(""),this.form.controls.Localidad.setValue(""),this.form.controls.Colonia.setValue([]),null!=e&&(this.isRFCLoad=!1,this.colonias=e.colonias,this.form.controls.CodigoPostal.setValue(o),this.form.controls.Pais.setValue(e.pais.descripcion),this.form.controls.Estado.setValue(e.estado.nombre),this.form.controls.Municipio.setValue(e.municipio.nombre),null!=e.localidad?(this.form.controls.Localidad.setValue(e.localidad.nombre),this.CveLocalidadCP=e.localidad.clave):this.form.controls.Localidad.setValue(""),this.form.controls.Colonia.setValue(e.colonias[0]),this.CvePaisCP=e.pais.id,this.CveEstadoCP=e.estado.clave,this.CveMunicipioCP=e.municipio.clave,this.CveColoniaCP=e.colonias[0].clave),this.spinner=!1},e=>{this.spinner=!1,this.infoAlert("Ocurrio un error al Consultar el c\xf3digo postal")}))}GetTicketPorFolio(){this.spinner=!0,this.clienteService.GetTicketPorFolio(this.form2.controls.FolioAFacturar.value).subscribe(e=>{this.spinner=!1,null==e&&this.infoAlert("El importe o el folio no coinciden, \n O a\xfan no se encuentra disponible para facturaci\xf3n , favor de revisar."),e.cancelado?this.infoAlert("El ticket se encuentra cancelado. \n\n\t\t Favor de comunicarse al correo:  "):e.fechaValida?null!=this.Modelo&&0==this.Modelo.clientID&&"CREDITO"==e.metodoPago||-1==this.tieneLineaCredito&&"CREDITO"==e.metodoPago?this.infoAlert("El cliente ingresado no cuenta con una l\xednea de cr\xe9dito asignada. \n\n\t\t Favor de comunicarse al correo:  "):e.facturada?this.alertConfirmReenviarFactura(e.folioFactura,"El ticket ya se encuentra facturado a nombre de: \n"+e.facturadoA+"\n  y enviada al correo: "+e.correoEnvioFactura):this.dataSource.data.filter(o=>o.folio==e.folio).length>0?this.infoAlert("El folio ya fue agregado"):this.dataSource.data.length>0&&this.dataSource.data[0].metodoPago!=e.metodoPago?this.infoAlert("La forma de pago no coincide con el de los folios ya seleccionados. Forma de pago del folio: "+this.dataSource.data[0].tipoPago):parseFloat(e.importe)==parseFloat(this.form2.controls.MontoAFacturar.value.replace("$","").replace(",",""))?(this.dataSource.data.push(e),this.dataSource.data.length>0&&("ElegirTipoPago"==this.dataSource.data[0].tarjetaPago?(this.mostrarTipoTarjeta=!0,this.dataSource.data.forEach(a=>{a.tipoPago="Elegir Tipo Tarjeta"})):this.mostrarTipoTarjeta=!1),this.dataSource=new c.by(this.dataSource.data),this.tickeInpo=this.dataSource.data,this.form2.reset()):this.infoAlert("El importe o el folio no coinciden, favor de revisar"):this.infoAlert("El ticket se encuentra fuera del periodo valido de facturaci\xf3n. \n\n\t\t Favor de comunicarse al correo:")})}tipoTajertaSeleccionada(e){this.dataSource.data.forEach(o=>{o.tipoPago=this.form2.controls.tipoPago.value})}reenviarFactura(e){this.spinner=!0,this.clienteService.reenviar(e).subscribe(o=>{this.spinner=!1,o.reenviarfactura?this.alertWithSuccess("Se ha Reenviado Correctamente"):this.infoAlert("ha ocurrido un error al reenviar")},o=>{this.spinner=!1,this.infoAlert("ha ocurrido un erro al reenviar")})}remove(e){C().fire({title:"Atenci\xf3n",text:"\xbfConfirma que desea eliminar el folio "+e.folio+"?",icon:"info",showCancelButton:!0,confirmButtonColor:this.colorPrincipal,cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar"}).then(o=>{o.isConfirmed&&(this.dataSource=new c.by(this.dataSource.data.filter(a=>a.folio!=e.folio)))})}obtenerInput(e){this.listadoTickets=e,this.listadoTickets.length>0&&"ElegirTipoPago"==this.listadoTickets[0].tarjetaPago&&(this.mostrarTipoTarjeta=!0),this.dataSource=new c.by(this.listadoTickets)}setFormatMoney(){var e;let o=this.form2.controls.MontoAFacturar.value;o=null==o?0:parseFloat(o.toString().replace(/[^0-9.-]+/g,""));const l=`$ ${null===(e=this.CurrenciPipe.transform(o,"MXN","symbol","1.2-2","es-MX"))||void 0===e?void 0:e.replace(/,/g,".").replace(/\s/g,"").replace("MX$","").trim()}`;this.form2.controls.MontoAFacturar.setValue(l)}alertWithSuccess(e){C().fire({icon:"success",title:"Exito",text:e,confirmButtonColor:this.colorPrincipal,footer:'<a href=""></a>'})}erroalert(e){C().fire({title:"Error",text:e,icon:"error"})}infoAlert(e){C().fire({icon:"info",title:"Atenci\xf3n",confirmButtonColor:this.colorPrincipal,text:e,footer:'<a href=""></a>'})}alertConfirmReenviarFactura(e,o){C().fire({title:"Atenci\xf3n",text:o,icon:"info",showCancelButton:!0,confirmButtonColor:this.colorPrincipal,cancelButtonColor:"#d33",confirmButtonText:"Reenviar Factura"}).then(a=>{a.isConfirmed&&this.reenviarFactura(e)})}soloNumeros(e){var o=e.currentTarget.value,a=String.fromCharCode(e.which);return this.validarDataKeypress(a,o)}validarDataKeypress(e,o){return!(o.indexOf("-")>-1&&"-"==e||"-"!=e&&!/^[0-9]+([.])?([0-9]+)?$/.test("0"+e)||o.indexOf(".")>-1&&"."==e)}downLoadFile(e,o,a,l){const m=window.atob(e),u=new ArrayBuffer(m.length),g=new Uint8Array(u);for(let v=0;v<m.length;v++)g[v]=m.charCodeAt(v);var x=new Blob([g],{type:o.toString()});(0,O.p)(x,"Factura_"+l+a)}abrirImagenTicket(){this.dialog.open(j,{width:"350px"}).afterClosed().subscribe(o=>{console.log("The dialog was closed")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.Lu),t.Y36(Q),t.Y36(f.H9),t.Y36(L.uw),t.Y36($.m),t.Y36(t.soG))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-facturar"]],features:[t._Bn([d.Lu,f.H9])],decls:161,vars:38,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["fxLayout","column",1,"flex-auto"],["fxLayout","column",1,""],[1,"flex","flex-auto"],["fxFlex.lg","5","fxFlex.xl","15","fxFlex","30"],["alt","Logo",1,"width","ml-4",3,"src"],["fxFlex","95","fxLayoutAlign","center center"],[1,"mr28","fonts"],["fxLayout","row","fxLayout.sm","row","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row"],["fxFlex","100","fxFlex.lg","76","fxFlex.xs","99",1,"ml-2","mrgnright"],[3,"formGroup"],["for","rfc",1,"m12"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row",1,"displayColumn"],["fxFlex","23","fxFlex.lg","23","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","13","placeholder","Ingrese su RFC","formControlName","RFC","pattern","^([A-Z\xd1&]{3,4})(?:- )?(\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01]))(?:- )?(([A-Z\\d]{2})([A\\d]))?$","oninput","this.value = this.value.toUpperCase()",3,"change"],["rfc",""],["matSuffix",""],["fxFlex","77","fxFlex.lg","40","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","200","formControlName","RazonSocial","placeholder","Ingrese su Raz\xf3n Social"],["razonSocial",""],[4,"ngIf"],["fxFlex","90","fxFlex.lg","40","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","placeholder","Correo Electr\xf3nico","formControlName","email","autocomplete","off"],["fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row",1,"displayColumn"],["fxFlex","100","fxFlex.lg","65","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent",3,"matTooltip"],["formControlName","regimenfiscal","placeholder","Seleccionar su Regimen Fiscal",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.lg","35","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent",3,"matTooltip"],["formControlName","usoCFDI","placeholder","Seleccionar Uso de CFDI",3,"selectionChange"],["fxLayout","column"],["fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row",1,"flex","displayColumn"],["fxFlex","100","fxFlex.lg","12",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","5","formControlName","CodigoPostal","placeholder","C.P.","autocomplete","off",3,"change","keypress"],["cp",""],["fxFlex.lg","22","fxFlex","100","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","20","placeholder","Pais","formControlName","Pais","placeholder","Pa\xeds"],["estado",""],["fxFlex","100","fxFlex.lg","22","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","20","placeholder","Estado","formControlName","Estado"],["matInput","","maxlength","50","placeholder","Municipio","formControlName","Municipio"],["municipio",""],["matInput","","maxlength","50","placeholder","Localidad","formControlName","Localidad"],["localidad",""],["fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row",1,"flex","mt-0","displayColumn"],["fxFlex.lg","24","fxFlex","100","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["formControlName","Colonia","placeholder","Colonia"],["fxFlex.lg","50","fxFlex","100","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","100","placeholder","Calle","formControlName","Calle"],["calle",""],["fxFlex.lg","13","fxFlex","100","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","5","formControlName","numeroExterior","placeholder","No. Int"],["noext",""],["fxFlex","100","fxFlex.lg","10","fxFlex.xs","100",1,"fuse-mat-dense","ml-2","w100porcent"],["matInput","","maxlength","50","formControlName","numeroInterior","placeholder","No. Ext"],["noint",""],["fxFlex","23","fxFlex.xs","100",1,"flex-col","ml-2","hidden","md:flex","lg:flex"],["fxLayoutAlign","center center",1,"text-lg","font-semibold","leading-tight"],["fxLayoutAlign","center center"],["ngbSlide",""],[1,"w-full","flex","flex-row","md:hidden","lg:hidden",3,"click"],[1,"ml-2","mr-2","w-full"],[1,"material-icons"],["fxFlex","100","fxLayout","column","fxFlex.xs","95",1,"flex","flex-auto","mrgnright"],["fxFlex","98","fxLayout","column","fxFlex.xs","95",1,"h-100","mt-2","ml-2"],["fxLayout","row"],["fxFlex","65","fxLayoutAlign","start center",1,"text-2xl","font-semibold"],["fxFlex","35","fxLayoutAlign","end center"],["mat-raised-button","",1,"mat-focus-indicator","text-white","mt30",3,"color","click"],["svgIcon","heroicons_outline:check"],[1,"mat-button-focus-overlay"],["fxLayout","column","fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","column",1,"w100","mt-4"],["fxLayout.sm","column","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayout.md","row","fxLayout.sm","row","fxLayout.gt-lg","row",1,"w100",3,"formGroup"],["fxFlex.xs","100","fxLayout.xs","column","fxLayoutAlign","start start",1,"w100"],["fxFlex","30","fxFlex.xs","50",1,"fuse-mat-dense","wfolio"],["matInput","","maxlength","21","placeholder","Ingrese su Folio","formControlName","FolioAFacturar",3,"keypress"],["folio",""],["fxLayout.xs","row","fxLayout","row","fxFlex.gt-xs","100","fxFlex.xs","90",1,"w100","ml"],["fxFlex","70","fxFlex.xs","70",1,"fuse-mat-dense","wmonto"],["matInput","","maxlength","9","placeholder","Ingrese su Monto","formControlName","MontoAFacturar","autocomplete","off",1,"right",3,"keypress","change"],["monto",""],["mat-raised-button","","matTooltip","Buscar",1,"text-white","ml-3",3,"color","click"],["svgIcon","heroicons_outline:search-circle"],["fxLayout.xs","row","fxLayout","row","fxFlex.gt-xs","100","fxFlex.xs","100",1,"w100","ml"],["class","fuse-mat-dense ml-2 w100porcent","class","fuse-mat-dense wmonto","fxFlex","50","fxFlex.xs","100",4,"ngIf"],[1,"label"],[1,"limite","mat-elevation-z8","hidden","md:inline","lg:inline"],["mat-table","",3,"dataSource"],["matColumnDef","folio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fecha"],["matColumnDef","descripcion"],["matColumnDef","pago"],["matColumnDef","importe"],["mat-header-cell","","class","right","style","width: 10%; text-align: right",4,"matHeaderCellDef"],["mat-cell","","class","right",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-cell","","style","width: 7%",4,"matHeaderCellDef"],["mat-header-row","","style","height: 40px",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","style","height: 40px",4,"matRowDef","matRowDefColumns"],[1,"flex","md:hidden","lg:hidden",3,"Tickets","Ticketsout"],[3,"value"],[1,"picsum-img-wrapper"],["alt","TICKET",2,"height","14rem",3,"src"],["fxFlex","50","fxFlex.xs","100",1,"fuse-mat-dense","wmonto"],["formControlName","tipoPago",3,"selectionChange"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"right",2,"width","10%","text-align","right"],["mat-cell","",1,"right"],["mat-header-cell","",2,"width","7%"],["mat-icon-button","",3,"click"],["svgIcon","heroicons_outline:trash"],["mat-header-row","",2,"height","40px"],["mat-row","",2,"height","40px"],[1,"modalOn"],["fxLayoutAlign","center center",1,"loadings"],[2,"width","100px",3,"src"],[1,"lds-roller"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div",6)(7,"h1",7),t._uU(8,"Facturaci\xf3n"),t.qZA()()(),t.TgZ(9,"div",8)(10,"mat-card",9)(11,"form",10)(12,"label",11)(13,"b"),t._uU(14,"DATOS FISCALES "),t.qZA()(),t.TgZ(15,"div",12)(16,"mat-form-field",13)(17,"input",14,15),t.NdJ("change",function(){return o.consultaRegimen()})("change",function(){return o.ConsultarRFC(1)}),t.qZA(),t.TgZ(19,"span",16),t._uU(20),t.qZA(),t.TgZ(21,"mat-error"),t._uU(22," El RFC es inv\xe1lido "),t.qZA()(),t.TgZ(23,"mat-form-field",17),t._UZ(24,"input",18,19),t.TgZ(26,"span",16),t._uU(27),t.qZA(),t.YNc(28,G,2,0,"mat-error",20),t.qZA(),t.TgZ(29,"mat-form-field",21),t._UZ(30,"input",22),t.YNc(31,X,2,0,"mat-error",20),t.qZA()(),t.TgZ(32,"div",23)(33,"mat-form-field",24)(34,"mat-label"),t._uU(35," Regimen fiscal "),t.qZA(),t.TgZ(36,"mat-select",25),t.NdJ("selectionChange",function(){return o.consultaUso(1)}),t.YNc(37,K,2,2,"mat-option",26),t.qZA(),t.YNc(38,W,2,0,"mat-error",20),t.qZA(),t.TgZ(39,"mat-form-field",27)(40,"mat-label"),t._uU(41," Uso de CFDI "),t.qZA(),t.TgZ(42,"mat-select",28),t.NdJ("selectionChange",function(){return o.cambiouso()}),t.YNc(43,tt,2,2,"mat-option",26),t.qZA(),t.YNc(44,et,2,0,"mat-error",20),t.YNc(45,ot,2,0,"mat-error",20),t.qZA()(),t.TgZ(46,"div",29)(47,"label",11)(48,"b"),t._uU(49,"DOMICILIO FISCAL"),t.qZA()(),t.TgZ(50,"div",30)(51,"mat-form-field",31)(52,"input",32,33),t.NdJ("change",function(){return o.GetDomicilio()})("keypress",function(l){return o.soloNumeros(l)}),t.qZA(),t.TgZ(54,"span",16),t._uU(55),t.qZA()(),t.TgZ(56,"mat-form-field",34),t._UZ(57,"input",35,36),t.TgZ(59,"span",16),t._uU(60),t.qZA(),t.YNc(61,it,2,0,"mat-error",20),t.qZA(),t.TgZ(62,"mat-form-field",37),t._UZ(63,"input",38,36),t.TgZ(65,"span",16),t._uU(66),t.qZA(),t.YNc(67,at,2,0,"mat-error",20),t.qZA(),t.TgZ(68,"mat-form-field",34),t._UZ(69,"input",39,40),t.TgZ(71,"span",16),t._uU(72),t.qZA(),t.YNc(73,nt,2,0,"mat-error",20),t.qZA(),t.TgZ(74,"mat-form-field",37),t._UZ(75,"input",41,42),t.TgZ(77,"span",16),t._uU(78),t.qZA()()(),t.TgZ(79,"div",43)(80,"mat-form-field",44)(81,"mat-select",45),t.YNc(82,rt,2,2,"mat-option",26),t.qZA()(),t.TgZ(83,"mat-form-field",46),t._UZ(84,"input",47,48),t.TgZ(86,"span",16),t._uU(87),t.qZA(),t.YNc(88,lt,2,0,"mat-error",20),t.qZA(),t.TgZ(89,"mat-form-field",49),t._UZ(90,"input",50,51),t.TgZ(92,"span",16),t._uU(93),t.qZA()(),t.TgZ(94,"mat-form-field",52),t._UZ(95,"input",53,54),t.qZA()()()()(),t.TgZ(97,"mat-card",55)(98,"div",56),t._uU(99," EJEMPLO DE TICKETS "),t.qZA(),t.TgZ(100,"div",57)(101,"ngb-carousel"),t.YNc(102,st,2,1,"ng-template",58),t.qZA()()()(),t.TgZ(103,"div",59),t.NdJ("click",function(){return o.abrirImagenTicket()}),t.TgZ(104,"mat-card",60)(105,"b"),t._uU(106," EJEMPLO DE TICKETS "),t.TgZ(107,"mat-icon")(108,"span",61),t._uU(109," help_outline "),t.qZA()()()()(),t.TgZ(110,"div",62)(111,"mat-card",63)(112,"div",64)(113,"div",65),t._uU(114," Tickets a Facturar "),t.qZA(),t.TgZ(115,"div",66)(116,"button",67),t.NdJ("click",function(){return o.guardar()}),t._UZ(117,"mat-icon",68),t._uU(118," \xa0 Facturar"),t._UZ(119,"span",69),t.qZA()()(),t.TgZ(120,"div",70)(121,"form",71)(122,"div",72)(123,"mat-form-field",73)(124,"input",74,75),t.NdJ("keypress",function(l){return o.soloNumeros(l)}),t.qZA()(),t.TgZ(126,"div",76)(127,"mat-form-field",77)(128,"input",78,79),t.NdJ("keypress",function(l){return o.soloNumeros(l)})("change",function(){return o.setFormatMoney()}),t.qZA()(),t.TgZ(130,"button",80),t.NdJ("click",function(){return o.GetTicketPorFolio()}),t._UZ(131,"mat-icon",81)(132,"span",69),t.qZA()(),t.TgZ(133,"div",82),t.YNc(134,ut,6,2,"mat-form-field",83),t.qZA()()()(),t.TgZ(135,"label",84),t._uU(136,"*Puede agregar m\xe1s de un Ticket a la lista"),t.qZA(),t.TgZ(137,"div",85)(138,"table",86),t.ynx(139,87),t.YNc(140,ft,2,0,"th",88),t.YNc(141,dt,2,1,"td",89),t.BQk(),t.ynx(142,90),t.YNc(143,pt,2,0,"th",88),t.YNc(144,ht,3,4,"td",89),t.BQk(),t.ynx(145,91),t.YNc(146,gt,2,0,"th",88),t.YNc(147,xt,2,1,"td",89),t.BQk(),t.ynx(148,92),t.YNc(149,Ct,2,0,"th",88),t.YNc(150,vt,2,1,"td",89),t.BQk(),t.ynx(151,93),t.YNc(152,Ft,2,0,"th",94),t.YNc(153,Tt,2,1,"td",95),t.BQk(),t.ynx(154,96),t.YNc(155,_t,1,0,"th",97),t.YNc(156,Zt,3,0,"td",95),t.BQk(),t.YNc(157,At,1,0,"tr",98),t.YNc(158,yt,1,0,"tr",99),t.qZA()()()(),t.TgZ(159,"app-lista-facturas",100),t.NdJ("Ticketsout",function(l){return o.obtenerInput(l)}),t.qZA()()()(),t.YNc(160,Pt,15,1,"div",20)),2&e){const a=t.MAs(18),l=t.MAs(25),m=t.MAs(53),u=t.MAs(58),g=t.MAs(70),x=t.MAs(76),v=t.MAs(85),Nt=t.MAs(91);t.xp6(5),t.s9C("src",o.rutaimegenes+"logo-.png",t.LSH),t.xp6(6),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",a.value.length," / 13"),t.xp6(7),t.hij("",l.value.length," / 200"),t.xp6(1),t.Q6J("ngIf",o.form.controls.RazonSocial.invalid),t.xp6(3),t.Q6J("ngIf",o.form.controls.email.invalid),t.xp6(2),t.Q6J("matTooltip",o.tooltipRegimen),t.xp6(4),t.Q6J("ngForOf",o.satregimentesArray),t.xp6(1),t.Q6J("ngIf",o.form.controls.regimenfiscal.invalid),t.xp6(1),t.Q6J("matTooltip",o.tooltipUsoCfdi),t.xp6(4),t.Q6J("ngForOf",o.satUsoCfdiArray),t.xp6(1),t.Q6J("ngIf",o.form.controls.usoCFDI.invalid),t.xp6(1),t.Q6J("ngIf",0==o.form.controls.regimenfiscal.value),t.xp6(10),t.hij("",m.value.length," / 5"),t.xp6(2),t.uIk("readonly",5==(null==o.form||null==o.form.controls||null==o.form.controls.CodigoPostal||null==o.form.controls.CodigoPostal.value?null:o.form.controls.CodigoPostal.value.length)||null),t.xp6(3),t.hij("",u.value.length," / 20"),t.xp6(1),t.Q6J("ngIf",o.form.controls.Pais.invalid),t.xp6(2),t.uIk("readonly",5==(null==o.form||null==o.form.controls||null==o.form.controls.CodigoPostal||null==o.form.controls.CodigoPostal.value?null:o.form.controls.CodigoPostal.value.length)||null),t.xp6(3),t.hij("",u.value.length," / 20"),t.xp6(1),t.Q6J("ngIf",o.form.controls.Estado.invalid),t.xp6(2),t.uIk("readonly",5==(null==o.form||null==o.form.controls||null==o.form.controls.CodigoPostal||null==o.form.controls.CodigoPostal.value?null:o.form.controls.CodigoPostal.value.length)||null),t.xp6(3),t.hij("",g.value.length," / 50"),t.xp6(1),t.Q6J("ngIf",o.form.controls.Municipio.invalid),t.xp6(5),t.hij("",x.value.length," / 50"),t.xp6(4),t.Q6J("ngForOf",o.colonias),t.xp6(5),t.hij("",v.value.length," / 100"),t.xp6(1),t.Q6J("ngIf",o.form.controls.Calle.invalid),t.xp6(5),t.hij("",Nt.value.length," / 5"),t.xp6(23),t.Q6J("color","primary"),t.xp6(5),t.Q6J("formGroup",o.form2),t.xp6(9),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",o.mostrarTipoTarjeta),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("Tickets",o.tickeInpo),t.xp6(1),t.Q6J("ngIf",o.spinner)}},directives:[p.xw,p.yH,p.Wh,_.a8,r._Y,r.JL,r.sg,F.KE,w.Nt,r.Fj,r.nD,r.JJ,r.u,r.c5,F.R9,F.TO,f.O5,b.gM,F.hX,I.gD,f.sg,z.ey,d.uo,d.xl,Z.Hw,T.lW,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk,H],pipes:[f.uU],styles:['.width{width:160px}h1{font-size:32px;font-weight:700;color:#707070}.fonts{font-size:20px}.fuente{font-size:10px}.mrg20{margin-top:-21px}@media screen and (min-width: 1920px) and (max-width: 5000px){.ml{margin-left:4px}.limite{height:400px!important;overflow:auto!important}.mrgntop{margin-top:0!important}}@media screen and (min-width: 1280px) and (max-width: 1919px){.mt10{margin-top:40px}.mt30{margin-top:30px}.fonts{font-size:22px}.fuente{font-size:16px}.limite{height:160px!important;overflow:auto!important}.margen{margin-left:0}.mat-header-cell,.mat-cell{font-size:14px}.mr28{margin-right:15%}.displaynone2{display:none!important}.mrgntop{margin-top:-25px!important}.margnt{margin-top:23px!important}.mrg20{margin-top:-21px}.ml{margin-left:4px}}.mr28{margin-right:18%}.label{font-style:italic;font-size:small;margin-bottom:8px}.over{cursor:pointer}@media screen and (max-width: 900px){.displaynone{display:none!important}.m12{margin-left:10px}.mrgnright{margin-right:8px}.mt10{margin-top:40px}.mr28{margin-right:12%}.wfolio{width:100%}.wmonto{width:50%}.w100{width:100%}.margnt{margin-top:23px!important}.displayColumn{flex-direction:column!important}.w100porcent{width:100%!important}.mrg20{margin-top:0}.ml{margin-left:4px}}@media screen and (max-width: 768px){.displaynone{display:none!important}.m12{margin-left:10px}.mrgnright{margin-right:8px}.mt10{margin-top:40px}.mr28{margin-right:12%}.wfolio{width:100%}.wmonto{width:50%}.w100{width:100%}.margnt{margin-top:23px!important}.displayColumn{flex-direction:column!important}.w100porcent{width:100%!important}.mrg20{margin-top:0}.ml{margin-left:4px}}@media only screen and (max-width: 599px){.ml{margin-left:0}}.w100{width:100%}.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper{margin-bottom:6px!important}table{width:100%}.tam{width:80%}.mat-header-cell,.mat-cell{font-size:11px!important}.mat-button,.mat-flat-button,.mat-raised-button,.mat-stroked-button{border-radius:4px!important}.margen{margin-right:10px}.right{text-align:right}.loadings{width:100%;height:100%}.modalOn{position:absolute;height:100%;width:100%;left:0;top:0;right:0;cursor:wait;background-color:#0006;background:rgba(0,0,0,.4);color:#0006;z-index:2001}.lds-roller{display:inline-block;position:relative;width:100px;height:100px;margin-left:1%}.lds-roller div{animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:32px 32px}.lds-roller div:after{content:" ";display:block;position:absolute;width:6px;height:6px;border-radius:50%;margin:-3px 0 0 -3px}.lds-roller div:nth-child(1){animation-delay:-36ms}.lds-roller div:nth-child(1):after{top:50px;left:50px}.lds-roller div:nth-child(2){animation-delay:-72ms}.lds-roller div:nth-child(2):after{top:54px;left:45px}.lds-roller div:nth-child(3){animation-delay:-.108s}.lds-roller div:nth-child(3):after{top:57px;left:39px}.lds-roller div:nth-child(4){animation-delay:-.144s}.lds-roller div:nth-child(4):after{top:58px;left:32px}.lds-roller div:nth-child(5){animation-delay:-.18s}.lds-roller div:nth-child(5):after{top:57px;left:25px}.lds-roller div:nth-child(6){animation-delay:-.216s}.lds-roller div:nth-child(6):after{top:54px;left:19px}.lds-roller div:nth-child(7){animation-delay:-.252s}.lds-roller div:nth-child(7):after{top:50px;left:14px}.lds-roller div:nth-child(8){animation-delay:-.288s}.lds-roller div:nth-child(8):after{top:45px;left:10px}@keyframes lds-roller{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.popup-class{font-size:1.5rem!important;text-align:center}.textoDialog{text-align:center}\n'],encapsulation:2}),i})();var It=s(9035);const bt=[{path:"",component:wt}];let Lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,_.QW,E.t,P.o9,S.Bb,c.p0,w.c,Z.Ps,d.IJ,I.LD,b.AV,P.o9,r.u5,r.UX,F.lN,M.k,T.ot,k.Cq,A.ie,N.JF,U.Bz.forChild(bt),It.E]]}),i})()}}]);