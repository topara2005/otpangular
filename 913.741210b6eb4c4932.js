"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[913],{7913:(V,f,r)=>{r.r(f),r.d(f,{CancelacionesModule:()=>G});var h=r(9808),d=r(7423),Z=r(7446),l=r(7322),p=r(5245),g=r(7531),x=r(773),w=r(7775),A=r(5804),_=r(4466),m=r(9826),a=r(3075),n=r(5e3),C=r(1463),I=r(5178),y=r(3927),T=r(6930),F=r(520);let v=(()=>{class t extends y.Id{constructor(e,o){super(e.CancelarCuentaUrl,o),this.config=e}getPendientesCancelacion(e){return this.http.get(`${this.endpoint}/GetPendienteCancelacion?min=${e}`)}cancelarCuenta(){return this.http.post(`${this.endpoint}/Cancel`,{})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(T._),n.LFG(F.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=r(2792),M=r(2494);const U=["signInNgForm"];function O(t,i){if(1&t&&(n.TgZ(0,"fuse-alert",23),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),n.xp6(1),n.hij(" ",e.alert.message," ")}}function P(t,i){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Correo electr\xf3nico requerido "),n.qZA())}function N(t,i){1&t&&(n.TgZ(0,"mat-error"),n._uU(1," Porfavor introduce un correo electr\xf3nico valido "),n.qZA())}function J(t,i){1&t&&n._UZ(0,"mat-icon",24),2&t&&n.Q6J("svgIcon","heroicons_solid:eye")}function Q(t,i){1&t&&n._UZ(0,"mat-icon",24),2&t&&n.Q6J("svgIcon","heroicons_solid:eye-off")}function S(t,i){1&t&&(n.TgZ(0,"span"),n._uU(1," Ingresar "),n.qZA())}function k(t,i){1&t&&n._UZ(0,"mat-progress-spinner",25),2&t&&n.Q6J("diameter",24)("mode","indeterminate")}const Y=function(){return["/forgot-password"]};let z=(()=>{class t{constructor(e,o,s,u,c,L,H){this._activatedRoute=e,this._authService=o,this._formBuilder=s,this._router=u,this._fuseConfigService=c,this._cancelarcuenta=L,this._sweel=H,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){console.log("fsdf"),this.signInForm=this._formBuilder.group({email:["",[a.kI.required,a.kI.email,a.kI.maxLength(99)]],password:["",a.kI.required]})}signIn(){if(this.signInForm.invalid)return;this.signInForm.disable(),this.showAlert=!1;let e=this.signInForm.value;this._authService.signIn(e.email,e.password).subscribe({next:o=>{console.log(o),this.signInForm.enable(),void 0===o.attributes?this._authService.evaluarMensajesCognito(o):void 0===o.code&&this.tienePendientes()},error:o=>{console.log(o),this.signInForm.enable(),this.signInNgForm.resetForm(),this.alert={type:"error",message:"Wrong email or password"},this.showAlert=!0}})}tienePendientes(){this._cancelarcuenta.getPendientesCancelacion(!0).subscribe({next:e=>{console.log(e),e.cancelar?(localStorage.setItem("fcancel","true"),this._router.navigate(["cancel"])):(this._sweel.alertWarning("Atenci\xf3n","Para acceder a \xe9sta opci\xf3n, es necesario cancelar la cuenta desde la aplicaci\xf3n."),this.cerrarSesion())},error:e=>{console.log(e),this._sweel.alertError("Error","Ha ocurrido un error al verificar una cancelacion pendiente."),this.cerrarSesion()}})}cerrarSesion(){this._authService.signOut(1)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(m.gz),n.Y36(C.e),n.Y36(a.qu),n.Y36(m.F0),n.Y36(I.m),n.Y36(v),n.Y36(b.g))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-cancel-account"]],viewQuery:function(e,o){if(1&e&&n.Gf(U,5),2&e){let s;n.iGM(s=n.CRH())&&(o.signInNgForm=s.first)}},decls:35,vars:15,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],[1,"md:flex","md:items-center","md:justify-center","w-full","sm:w-auto","md:h-full","md:w-full","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[2,"margin-left","20%"],[1,"w-50"],["src","assets/images/logo/logo-.png"],[1,"mt-8","text-2xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],[4,"ngIf"],["matSuffix","",1,"icon-size-5",3,"svgIcon"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"inline-flex","items-between","justify-between","w-full","mt-1.5"],[1,"text-md","font-semibold","text-black","hover:underline",3,"routerLink"],[1,"flex","justify-center"],["mat-raised-button","","mat-flat-button","",1,"submit-button","mt-8",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"diameter","mode"]],template:function(e,o){if(1&e){const s=n.EpF();n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n._UZ(5,"img",5),n.qZA()(),n.TgZ(6,"div",6),n._uU(7,"Confirmaci\xf3n de cancelaci\xf3n "),n.qZA(),n.YNc(8,O,2,5,"fuse-alert",7),n.TgZ(9,"form",8,9)(11,"mat-form-field",10)(12,"mat-label"),n._uU(13,"Correo electr\xf3nico"),n.qZA(),n._UZ(14,"input",11),n.YNc(15,P,2,0,"mat-error",12),n.YNc(16,N,2,0,"mat-error",12),n._UZ(17,"mat-icon",13),n.qZA(),n.TgZ(18,"mat-form-field",10)(19,"mat-label"),n._uU(20,"Contrase\xf1a"),n.qZA(),n._UZ(21,"input",14,15),n.TgZ(23,"button",16),n.NdJ("click",function(){n.CHM(s);const c=n.MAs(22);return c.type="password"===c.type?"text":"password"}),n.YNc(24,J,1,1,"mat-icon",17),n.YNc(25,Q,1,1,"mat-icon",17),n.qZA(),n.TgZ(26,"mat-error"),n._uU(27," Contrase\xf1a requerida "),n.qZA()(),n.TgZ(28,"div",18)(29,"a",19),n._uU(30,"Olvid\xe9 mi contrase\xf1a "),n.qZA()(),n.TgZ(31,"div",20)(32,"button",21),n.NdJ("click",function(){return o.signIn()}),n.YNc(33,S,2,0,"span",12),n.YNc(34,k,1,2,"mat-progress-spinner",22),n.qZA()()()()()()}if(2&e){const s=n.MAs(22);n.xp6(8),n.Q6J("ngIf",o.showAlert),n.xp6(1),n.Q6J("formGroup",o.signInForm),n.xp6(5),n.Q6J("formControlName","email"),n.xp6(1),n.Q6J("ngIf",o.signInForm.get("email").hasError("required")),n.xp6(1),n.Q6J("ngIf",o.signInForm.get("email").hasError("email")),n.xp6(1),n.Q6J("svgIcon","heroicons_solid:mail"),n.xp6(4),n.Q6J("formControlName","password"),n.xp6(3),n.Q6J("ngIf","password"===s.type),n.xp6(1),n.Q6J("ngIf","text"===s.type),n.xp6(4),n.Q6J("routerLink",n.DdM(14,Y)),n.xp6(3),n.Q6J("color","primary")("disabled",o.signInForm.disabled),n.xp6(1),n.Q6J("ngIf",!o.signInForm.disabled),n.xp6(1),n.Q6J("ngIf",o.signInForm.disabled)}},directives:[h.O5,M.W,a._Y,a.JL,a.sg,l.KE,l.hX,g.Nt,a.Fj,a.JJ,a.u,l.TO,p.Hw,l.R9,d.lW,m.yS,x.Ou],styles:[""]}),t})();var q=r(9082);const j=[{path:"sign-in",component:z},{path:"",component:(()=>{class t{constructor(e,o,s,u,c){this._cancelarcuenta=e,this._sweel=o,this._router=s,this._auth=u,this._shared=c}ngOnInit(){this.perfil=new a.cw({email:new a.NI("",[]),tel:new a.NI("",[]),nombre:new a.NI("",[]),apellidos:new a.NI("",[]),monedero:new a.NI("",[])}),this.tienePendientes()}tienePendientes(){this._shared.cargando=!0,this._cancelarcuenta.getPendientesCancelacion(!1).subscribe({next:e=>{this._shared.cargando=!1,console.log(e),e.cancelar?(this.perfil.controls.nombre.setValue(`${e.datos.nombres}`),this.perfil.controls.apellidos.setValue(`${e.datos.apellidoPaterno} ${this._shared.isNullOrUndefined(e.datos.apellidoMaterno,!0)?"":e.datos.apellidoMaterno}`),this.perfil.controls.email.setValue(`${e.datos.correo}`),this.perfil.controls.tel.setValue(`${e.datos.telefono}`),this.perfil.controls.monedero.setValue(`${e.datos.monedero}`)):(this._sweel.alertWarning("Atenci\xf3n","Para acceder a \xe9sta opci\xf3n, es necesario cancelar la cuenta desde la aplicaci\xf3n."),this.cerrarSesion())},error:e=>{console.log(e),this._shared.cargando=!1,this._sweel.alertError("Error","Ha ocurrido un error al verificar una cancelacion pendiente."),this.cerrarSesion()}})}cerrarSesion(){this._sweel.alertWarningConfirm("Atenci\xf3n","Para volver a entrar a esta opci\xf3n, deber\xe1 hacerlo desde la aplicaci\xf3n.").then(e=>{e.isConfirmed&&(localStorage.removeItem("fcancel"),this._auth.signOut())})}cerrarSesionRemove(){this._auth.onRemoveAccount().subscribe({next:e=>{console.log(e),localStorage.removeItem("fcancel"),this._auth.signOut()},error:e=>{console.log(e)}})}preCancelar(){this._sweel.alertWarningConfirm("Atenci\xf3n","\xbfEst\xe1 seguro de cancelar su cuenta? Perder\xe1 todos sus datos.").then(e=>{e.isConfirmed&&this.cancelarCuenta()})}cancelarCuenta(){this._cancelarcuenta.cancelarCuenta().subscribe({next:o=>{console.log(o),this.cerrarSesionRemove()},error:o=>{this._sweel.alertError("Error","Ha ocurrido un error al cancelar la cuenta, favor de contactar al administrador del sistema.")}})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(v),n.Y36(b.g),n.Y36(m.F0),n.Y36(C.e),n.Y36(q.F))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-account"]],decls:57,vars:6,consts:[["role","banner","id","fh5co-header"],[1,"container"],[1,"navbar","navbar-default"],[1,"text-center","w-40",2,"justify-content","center !important"],["src","assets/images/imagenesinicio/logo-.png","alt","LogoAero",1,"inline"],["id","fh5co-home","data-section","home","data-stellar-background-ratio","0.5",1,"w-full","h-full"],[1,"container","w-full","h-full"],[1,"text-wrap","text-start"],[1,"text-inner","text-start"],[1,"flex","flex-col","items-start","justify-start","w-full","h-full","pt-8"],[1,"grid","grid-cols-2","w-full","h-12"],[1,"text-xl","md:text-3xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate","ng-star-inserted","p-4"],["mat-flat-button","","matTooltip","Guardar","type","submit",1,"text-white","absolute","right-4","font-semibold","text-sm",3,"click"],[2,"font-size","17px !important"],["fxLayout","row","fxLayout.xs","column",1,"w-full","p-2"],["fxFlexOrder","2","fxFlex","50","fxFlex.xs","100",1,"flex-col","pt-2","pl-2"],[3,"formGroup"],[1,"w-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","fill-primary","mr-2"],["d","M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"],["d","M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"],["id","email","matInput","","placeholder","Correo electr\xf3nico","readonly","",3,"formControlName"],["d","M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"],["id","tel","matInput","","placeholder","Tel\xe9fono","readonly","",3,"formControlName"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],["id","nombre","matInput","","placeholder","Nombre(s)","readonly","",3,"formControlName"],["id","apellidos","matInput","","placeholder","Apellido(s)","readonly","",3,"formControlName"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","fill-orange-400","mr-2"],["id","monedero","matInput","","placeholder","Monedero","readonly","",3,"formControlName"],["mat-flat-button","","matTooltip","Guardar","type","submit",1,"text-white","absolute","right-4","font-semibold","text-sm","bg-orange-500","hover:bg-orange-600",3,"click"]],template:function(e,o){1&e&&(n.TgZ(0,"body")(1,"header",0)(2,"div",1)(3,"nav",2)(4,"div",3),n._UZ(5,"img",4),n.qZA()()()(),n.TgZ(6,"section",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),n._uU(13," Datos de la cuenta "),n.qZA(),n.TgZ(14,"div",11)(15,"button",12),n.NdJ("click",function(){return o.preCancelar()}),n.TgZ(16,"mat-icon",13),n._uU(17,"cancel"),n.qZA(),n._uU(18," Cancelar cuenta "),n.qZA()()(),n.TgZ(19,"div",14)(20,"div",15)(21,"form",16)(22,"mat-form-field",17),n.O4$(),n.TgZ(23,"svg",18),n._UZ(24,"path",19)(25,"path",20),n.qZA(),n.kcU(),n.TgZ(26,"mat-label"),n._uU(27,"Correo electr\xf3nico"),n.qZA(),n._UZ(28,"input",21),n.qZA(),n.TgZ(29,"mat-form-field",17),n.O4$(),n.TgZ(30,"svg",18),n._UZ(31,"path",22),n.qZA(),n.kcU(),n.TgZ(32,"mat-label"),n._uU(33,"Tel\xe9fono"),n.qZA(),n._UZ(34,"input",23),n.qZA(),n.TgZ(35,"mat-form-field",17),n.O4$(),n.TgZ(36,"svg",18),n._UZ(37,"path",24),n.qZA(),n.kcU(),n.TgZ(38,"mat-label"),n._uU(39,"Nombres(s)"),n.qZA(),n._UZ(40,"input",25),n.qZA(),n.TgZ(41,"mat-form-field",17),n.O4$(),n.TgZ(42,"svg",18),n._UZ(43,"path",24),n.qZA(),n.kcU(),n.TgZ(44,"mat-label"),n._uU(45,"Apellidos"),n.qZA(),n._UZ(46,"input",26),n.qZA(),n.TgZ(47,"mat-form-field",17),n.O4$(),n.TgZ(48,"svg",27),n._UZ(49,"path",24),n.qZA(),n.kcU(),n.TgZ(50,"mat-label"),n._uU(51,"Monedero electr\xf3nico"),n.qZA(),n._UZ(52,"input",28),n.qZA()(),n.TgZ(53,"button",29),n.NdJ("click",function(){return o.cerrarSesion()}),n.TgZ(54,"mat-icon",13),n._uU(55,"cancel"),n.qZA(),n._uU(56," Cerrar sesi\xf3n "),n.qZA()()()()()()()()()),2&e&&(n.xp6(21),n.Q6J("formGroup",o.perfil),n.xp6(7),n.Q6J("formControlName","email"),n.xp6(6),n.Q6J("formControlName","tel"),n.xp6(6),n.Q6J("formControlName","nombre"),n.xp6(6),n.Q6J("formControlName","apellidos"),n.xp6(6),n.Q6J("formControlName","monedero"))},directives:[d.lW,p.Hw,a._Y,a.JL,a.sg,l.KE,l.hX,g.Nt,a.Fj,a.JJ,a.u],styles:["","#colour-variations[_ngcontent-%COMP%] {\n            padding: 10px;\n            -webkit-transition: 0.5s;\n            -o-transition: 0.5s;\n            transition: 0.5s;\n            width: 140px;\n            position: fixed;\n            left: 0;\n            top: 100px;\n            z-index: 999999;\n            background: #fff;\n            \n            border-top-right-radius: 4px;\n            border-bottom-right-radius: 4px;\n            -webkit-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            -moz-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            -ms-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n        }\n\n        #colour-variations.sleep[_ngcontent-%COMP%] {\n            margin-left: -140px;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n            text-align: center;\n            ;\n            font-size: 11px;\n            letter-spacing: 2px;\n            text-transform: uppercase;\n            color: #777;\n            margin: 0 0 10px 0;\n            padding: 0;\n            ;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], #colour-variations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n            padding: 0;\n            margin: 0;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n            list-style: none;\n            display: block;\n            margin-bottom: 5px !important;\n            float: left;\n            width: 100%;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n            width: 100%;\n            position: relative;\n            display: block;\n            overflow: hidden;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            -ms-border-radius: 4px;\n            border-radius: 4px;\n            -webkit-transition: 0.4s;\n            -o-transition: 0.4s;\n            transition: 0.4s;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\n            opacity: .9;\n        }\n\n        #colour-variations[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] {\n            width: 33.33%;\n            height: 20px;\n            float: left;\n            display: -moz-inline-stack;\n            display: inline-block;\n            zoom: 1;\n            display: inline;\n        }\n\n        .option-toggle[_ngcontent-%COMP%] {\n            position: absolute;\n            right: 0;\n            top: 0;\n            margin-top: 5px;\n            margin-right: -30px;\n            width: 30px;\n            height: 30px;\n            background: #f64662;\n            text-align: center;\n            border-top-right-radius: 4px;\n            border-bottom-right-radius: 4px;\n            color: #fff;\n            cursor: pointer;\n            -webkit-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            -moz-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            -ms-box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n            box-shadow: 0 0 9px 0 rgba(0, 0, 0, .1);\n        }\n\n        .option-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n            top: 2px;\n            position: relative;\n        }\n\n        .option-toggle[_ngcontent-%COMP%]:hover, .option-toggle[_ngcontent-%COMP%]:focus, .option-toggle[_ngcontent-%COMP%]:active {\n            color: #fff;\n            text-decoration: none;\n            outline: none;\n        }"]}),t})(),canActivate:[r(6525).m]}];let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.ez,d.ot,Z.p9,l.lN,p.Ps,g.c,x.Cq,A.J,w.fC,_.m,m.Bz.forChild(j)]]}),t})()}}]);