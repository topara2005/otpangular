"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[883],{324:(C,g,i)=>{i.d(g,{_g:()=>f,U0:()=>l,RT:()=>_,hf:()=>h,tO:()=>x});const f=a=>0===c(a.value).trim().length?{whiteSpacesError:{value:"control tiene espacios sin caracteres"}}:null,l=a=>0===c(a.value).trim().length||a.value.includes(" ")?{withoutSpaceError:{value:"control has whitespace"}}:null,_=a=>c(a.value).match(/^([A-Z\xd1&]{3,4}) ?(?:- ?)?(\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])) ?(?:- ?)?([A-Z\d]{2})([A\d])$/)?null:{rfcValidatorError:{value:"RFC no v\xe1lido"}};function h(){return a=>/^[0-9]{0,10}$/.test(a.value)?null:{telOnlyNumbers:{value:a.value}}}function x(){return a=>/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]*$/.test(a.value)?null:{onlyLetters:{value:a.value}}}function c(a,d=!1){return null==a||d&&"string"==typeof a&&""===a.trim()?"":a}},2883:(C,g,i)=>{i.r(g),i.d(g,{AuthForgotPasswordModule:()=>G});var f=i(9826),w=i(7423),l=i(7322),_=i(5245),h=i(7531),x=i(773),c=i(5804),a=i(7775),d=i(4466),s=i(3075),A=i(8746),F=i(8288),v=i(324),o=i(5e3),b=i(1463),Z=i(2792),T=i(9808),y=i(2494);const P=["forgotPasswordNgForm"];function I(r,u){if(1&r&&(o.TgZ(0,"fuse-alert",18),o._uU(1),o.qZA()),2&r){const e=o.oxw();o.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),o.xp6(1),o.hij(" ",e.alert.message," ")}}function N(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Correo electr\xf3nico requerido "),o.qZA())}function J(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," Porfavor introduce un correo electr\xf3nico valido "),o.qZA())}function U(r,u){1&r&&(o.TgZ(0,"span"),o._uU(1," Enviar c\xf3digo "),o.qZA())}function k(r,u){1&r&&o._UZ(0,"mat-progress-spinner",21),2&r&&o.Q6J("diameter",24)("mode","indeterminate")}function Q(r,u){if(1&r){const e=o.EpF();o.TgZ(0,"button",19),o.NdJ("click",function(){return o.CHM(e),o.oxw().sendResetLink()}),o.YNc(1,U,2,0,"span",14),o.YNc(2,k,1,2,"mat-progress-spinner",20),o.qZA()}if(2&r){const e=o.oxw();o.Q6J("color","primary")("disabled",e.forgotPasswordForm.disabled),o.xp6(1),o.Q6J("ngIf",!e.forgotPasswordForm.disabled),o.xp6(1),o.Q6J("ngIf",e.forgotPasswordForm.disabled)}}function q(r,u){1&r&&o._UZ(0,"mat-icon",39),2&r&&o.Q6J("svgIcon","heroicons_solid:eye")}function E(r,u){1&r&&o._UZ(0,"mat-icon",39),2&r&&o.Q6J("svgIcon","heroicons_solid:eye-off")}function M(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," La contrase\xf1a no debe de contener espacios vac\xedos. "),o.qZA())}function Y(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," El nombre es "),o.TgZ(2,"strong"),o._uU(3,"requerido"),o.qZA()())}function S(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," La contrase\xf1a debe contener al menos "),o.TgZ(2,"strong"),o._uU(3,"8 caracteres"),o.qZA(),o._uU(4,". "),o.qZA())}function $(r,u){1&r&&o._UZ(0,"mat-icon",39),2&r&&o.Q6J("svgIcon","heroicons_solid:eye")}function H(r,u){1&r&&o._UZ(0,"mat-icon",39),2&r&&o.Q6J("svgIcon","heroicons_solid:eye-off")}function L(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," La contrase\xf1a no debe de contener espacios vac\xedos. "),o.qZA())}function V(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," El nombre es "),o.TgZ(2,"strong"),o._uU(3,"requerido"),o.qZA()())}function D(r,u){1&r&&(o.TgZ(0,"mat-error"),o._uU(1," La contrase\xf1a debe contener al menos "),o.TgZ(2,"strong"),o._uU(3,"8 caracteres"),o.qZA(),o._uU(4,". "),o.qZA())}function R(r,u){if(1&r){const e=o.EpF();o.TgZ(0,"form",22)(1,"mat-form-field",12)(2,"mat-label"),o._uU(3,"Nueva contrase\xf1a"),o.qZA(),o._UZ(4,"input",23,24),o.TgZ(6,"button",25),o.NdJ("click",function(){o.CHM(e);const t=o.MAs(5);return t.type="password"===t.type?"text":"password"}),o.YNc(7,q,1,1,"mat-icon",26),o.YNc(8,E,1,1,"mat-icon",26),o.qZA(),o.YNc(9,M,2,0,"mat-error",14),o.YNc(10,Y,4,0,"mat-error",14),o.YNc(11,S,5,0,"mat-error",14),o.qZA(),o.TgZ(12,"mat-form-field",12)(13,"mat-label"),o._uU(14,"Confirmar nueva contrase\xf1a"),o.qZA(),o._UZ(15,"input",27,28),o.TgZ(17,"button",25),o.NdJ("click",function(){o.CHM(e);const t=o.MAs(16);return t.type="password"===t.type?"text":"password"}),o.YNc(18,$,1,1,"mat-icon",26),o.YNc(19,H,1,1,"mat-icon",26),o.qZA(),o.YNc(20,L,2,0,"mat-error",14),o.YNc(21,V,4,0,"mat-error",14),o.YNc(22,D,5,0,"mat-error",14),o.qZA(),o.TgZ(23,"mat-label",29),o._uU(24,"C\xf3digo de verificaci\xf3n *"),o.qZA(),o.TgZ(25,"div",30)(26,"mat-form-field",31)(27,"input",32),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(1)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()(),o.TgZ(28,"mat-form-field",33)(29,"input",34),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(2)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()(),o.TgZ(30,"mat-form-field",33)(31,"input",35),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(3)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()(),o.TgZ(32,"mat-form-field",33)(33,"input",36),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(4)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()(),o.TgZ(34,"mat-form-field",33)(35,"input",37),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(5)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()(),o.TgZ(36,"mat-form-field",33)(37,"input",38),o.NdJ("keyup",function(){return o.CHM(e),o.oxw().eventUp(6)})("paste",function(t){return o.CHM(e),o.oxw().onPaste(t)}),o.qZA()()(),o.TgZ(38,"div",15)(39,"button",19),o.NdJ("click",function(t){return o.CHM(e),o.oxw().sendCode(t)}),o.TgZ(40,"span"),o._uU(41," Confirmar c\xf3digo "),o.qZA()()()()}if(2&r){const e=o.MAs(5),n=o.MAs(16),t=o.oxw();o.Q6J("formGroup",t.codigo),o.xp6(4),o.Q6J("formControlName","password"),o.xp6(3),o.Q6J("ngIf","password"===e.type),o.xp6(1),o.Q6J("ngIf","text"===e.type),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password.hasError("withoutSpaceError")),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password.hasError("required")),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password.hasError("minlength")),o.xp6(4),o.Q6J("formControlName","password2"),o.xp6(3),o.Q6J("ngIf","password"===n.type),o.xp6(1),o.Q6J("ngIf","text"===n.type),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password2.hasError("withoutSpaceError")),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password2.hasError("required")),o.xp6(1),o.Q6J("ngIf",null==t.codigo||null==t.codigo.controls?null:t.codigo.controls.password2.hasError("minlength")),o.xp6(5),o.Q6J("formControlName","number1"),o.xp6(2),o.Q6J("formControlName","number2"),o.xp6(2),o.Q6J("formControlName","number3"),o.xp6(2),o.Q6J("formControlName","number4"),o.xp6(2),o.Q6J("formControlName","number5"),o.xp6(2),o.Q6J("formControlName","number6"),o.xp6(2),o.Q6J("color","primary")("disabled",t.codigo.invalid)}}const j=function(){return["/sign-in"]},O=[{path:"",component:(()=>{class r{constructor(e,n,t,m){this._authService=e,this._formBuilder=n,this._msg=t,this._router=m,this.alert={type:"success",message:""},this.showAlert=!1,this.showCodigo=!1}ngOnInit(){this.forgotPasswordForm=this._formBuilder.group({email:["",[s.kI.required,s.kI.email,s.kI.max(99)]]}),this.codigo=this._formBuilder.group({password:["",[s.kI.required,v.U0,s.kI.maxLength(99),s.kI.minLength(8)]],password2:["",[s.kI.required,v.U0,s.kI.maxLength(99),s.kI.minLength(8)]],number1:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]],number2:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]],number3:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]],number4:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]],number5:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]],number6:["",[s.kI.required,s.kI.pattern("^[0-9]*$")]]})}sendResetLink(){this.forgotPasswordForm.invalid||(this.forgotPasswordForm.disable(),this.showAlert=!1,this._authService.sendCodeResetPassword(this.forgotPasswordForm.get("email").value.trim()).pipe((0,A.x)(()=>{this.forgotPasswordForm.enable()})).subscribe({next:e=>{void 0!==e.code?this._authService.evaluarMensajesCognito(e):(this.showAlert=!0,this.showCodigo=!0,this.alert={type:"success",message:"Se ha enviado un c\xf3digo de recuperaci\xf3n a su correo electr\xf3nico indicado."})},error:e=>{console.log(e),this.alert={type:"error",message:"Email does not found! Are you sure you are already a member?"}}}))}sendCode(e){if(this.codigo.invalid)return;let n=this.codigo.value;if(n.password.trim()!==n.password2.trim())return this._msg.alertWarning("Atenci\xf3n","Las contrase\xf1as debe ser identicas."),!1;let t=`${n.number1}${n.number2}${n.number3}${n.number4}${n.number5}${n.number6}`;this._authService.submitForgotPassword(this.forgotPasswordForm.value.email.toLowerCase(),t,n.password.trim()).subscribe({next:m=>{e.preventDefault(),void 0!==m.code?(this._authService.evaluarMensajesCognito(m),this.limpiarCodigo()):this._msg.alertSuccess("\xc9xito","La contrase\xf1a se ha cambiado exitosamente.").then(p=>{this._router.navigate(["/sign-in"])})},error:m=>{console.log(m),this._msg.alertError("Error","UserNotFoundException"===m.code?"El usuario no fue encontrado.":"Ha ocurrido un error. Favor de intentarlo de nuevo.")}})}onPaste(e){let t=`${(e.clipboardData||window.clipboardData).getData("text")}`.trim(),m=Array.from(t);if(m.length>=6){for(let p=0;p<6;p++)this.codigo.controls[`number${p+1}`].setValue(m[p]);this.codigo.markAsTouched(),this.codigo.markAsDirty()}}limpiarCodigo(){this.codigo.controls.number1.setValue(""),this.codigo.controls.number2.setValue(""),this.codigo.controls.number3.setValue(""),this.codigo.controls.number4.setValue(""),this.codigo.controls.number5.setValue(""),this.codigo.controls.number6.setValue("")}eventUp(e){const t=document.querySelector(`[id="number${e+1}"]`);6===e?""===this.codigo.controls.number1.value&&this.codigo.controls[`number${e}`].valid&&document.querySelector('[id="number1"]').focus():this.codigo.controls[`number${e}`].valid&&t.focus()}}return r.\u0275fac=function(e){return new(e||r)(o.Y36(b.e),o.Y36(s.qu),o.Y36(Z.g),o.Y36(f.F0))},r.\u0275cmp=o.Xpm({type:r,selectors:[["auth-forgot-password"]],viewQuery:function(e,n){if(1&e&&o.Gf(P,5),2&e){let t;o.iGM(t=o.CRH())&&(n.forgotPasswordNgForm=t.first)}},decls:25,vars:9,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],[1,"md:flex","md:items-center","md:justify-center","w-full","sm:w-auto","md:h-full","md:w-full","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[2,"margin-left","20%"],[1,"w-50"],["src","assets/images/logo/logo-.png"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary","hover:underline",3,"routerLink"],[1,"text-3xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-4",3,"formGroup"],["forgotPasswordNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],[4,"ngIf"],[1,"flex","justify-center"],["mat-raised-button","","class","submit-button mt-2",3,"color","disabled","click",4,"ngIf"],["class","mt-8",3,"formGroup",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],["mat-raised-button","",1,"submit-button","mt-2",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"],[1,"mt-8",3,"formGroup"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password2","matInput","","type","password",3,"formControlName"],["passworddos",""],[1,"font-medium","text-base"],[1,"flex","flex-row"],[1,"w-1/6","text-center"],["id","number1","matInput","","maxlength","1",3,"formControlName","keyup","paste"],[1,"w-1/6","ml-2","text-center"],["id","number2","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number3","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number4","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number5","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number6","matInput","","maxlength","1",3,"formControlName","keyup","paste"],[1,"icon-size-5",3,"svgIcon"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.qZA()(),o.TgZ(6,"div",6)(7,"div"),o._uU(8,"Regresar a "),o.qZA(),o.TgZ(9,"a",7),o._uU(10,"iniciar sesi\xf3n "),o.qZA()(),o.TgZ(11,"div",8),o._uU(12,"Recuperar contrase\xf1a"),o.qZA(),o.YNc(13,I,2,5,"fuse-alert",9),o.TgZ(14,"form",10,11)(16,"mat-form-field",12)(17,"mat-label"),o._uU(18,"Correo electr\xf3nico"),o.qZA(),o._UZ(19,"input",13),o.YNc(20,N,2,0,"mat-error",14),o.YNc(21,J,2,0,"mat-error",14),o.qZA(),o.TgZ(22,"div",15),o.YNc(23,Q,3,4,"button",16),o.qZA()(),o.YNc(24,R,42,21,"form",17),o.qZA()()()),2&e&&(o.xp6(9),o.Q6J("routerLink",o.DdM(8,j)),o.xp6(4),o.Q6J("ngIf",n.showAlert),o.xp6(1),o.Q6J("formGroup",n.forgotPasswordForm),o.xp6(5),o.Q6J("formControlName","email"),o.xp6(1),o.Q6J("ngIf",n.forgotPasswordForm.get("email").hasError("required")),o.xp6(1),o.Q6J("ngIf",n.forgotPasswordForm.get("email").hasError("email")),o.xp6(2),o.Q6J("ngIf",!n.showCodigo),o.xp6(1),o.Q6J("ngIf",n.showCodigo))},directives:[f.yS,T.O5,y.W,s._Y,s.JL,s.sg,l.KE,l.hX,h.Nt,s.Fj,s.JJ,s.u,l.TO,w.lW,x.Ou,l.R9,_.Hw,s.nD],encapsulation:2,data:{animation:F.L}}),r})()}];let G=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[f.Bz.forChild(O),w.ot,l.lN,_.Ps,h.c,x.Cq,c.J,a.fC,d.m]]}),r})()}}]);