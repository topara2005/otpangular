"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[592],{4500:(R,c,n)=>{n.d(c,{Q:()=>Z});var r=n(3075),C=n(8288),e=n(5e3),g=n(1463),_=n(9826),v=n(9082),A=n(2792),f=n(7322),T=n(7531),h=n(9808),b=n(7423);function s(m,d){1&m&&(e.TgZ(0,"mat-error"),e._uU(1," Correo electr\xf3nico requerido "),e.qZA())}function E(m,d){1&m&&(e.TgZ(0,"mat-error"),e._uU(1," Porfavor introduce un correo electr\xf3nico valido "),e.qZA())}function I(m,d){1&m&&(e.TgZ(0,"span"),e._uU(1," Confirmar "),e.qZA())}function x(m,d){1&m&&e._UZ(0,"mat-progress-spinner",30),2&m&&e.Q6J("diameter",24)("mode","indeterminate")}const q=function(){return["/sign-in"]};let Z=(()=>{class m{constructor(a,t,o,i,l){this._formBuilder=a,this._auth=t,this._router=o,this._shared=i,this._msg=l,this.email="",this.onCodeConfirmation=()=>{if(this.confirmarForm.invalid)return;this._shared.cargando=!0,this.confirmarForm.disable();let u=this.confirmarForm.value;this._auth.confirmSignUp(u.email,`${u.number1}${u.number2}${u.number3}${u.number4}${u.number5}${u.number6}`).subscribe({next:p=>{"SUCCESS"==p?(localStorage.setItem("confirmedEmail",u.email),this._router.navigateByUrl("/sign-in"),this._msg.alertSuccess("\xc9xito","Su cuenta se ha confirmado exitosamente.")):(this._auth.evaluarMensajesCognito(p,u.email,"confirm"),"ExpiredCodeException"===p.code&&this.limpiarCodigo()),this.confirmarForm.enable(),this._shared.cargando=!1},error:p=>{console.log(p),this._shared.cargando=!1}})}}ngOnInit(){this.confirmarForm=this._formBuilder.group({email:[this.email,[r.kI.required,r.kI.email,r.kI.maxLength(150)]],number1:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]],number2:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]],number3:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]],number4:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]],number5:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]],number6:["",[r.kI.required,r.kI.pattern("^[0-9]*$")]]})}onPaste(a){let o=`${(a.clipboardData||window.clipboardData).getData("text")}`.trim(),i=Array.from(o);if(i.length>=6)for(let l=0;l<6;l++)this.confirmarForm.controls[`number${l+1}`].setValue(i[l])}reenviarCodigo(){let a=this.confirmarForm.value;if(""===a.email.trim())return this._msg.alertWarning("Atenci\xf3n","Es necesario capturar el correo electr\xf3nico."),!1;this._msg.alertWarningConfirm("Atenci\xf3n","\xbfEst\xe1 seguro de pedir un nuevo c\xf3digo de verificaci\xf3n?").then(t=>{if(t.isConfirmed){let o=a.email.toLowerCase().trim();this._auth.resendCodeConfirmation(o).subscribe(i=>{this._msg.alertSuccess("\xc9xito","Se le ha enviado un c\xf3digo v\xe1lido a su correo electr\xf3nico.").finally(()=>{this.limpiarCodigo()})})}})}limpiarCodigo(){this.confirmarForm.controls.number1.setValue(""),this.confirmarForm.controls.number2.setValue(""),this.confirmarForm.controls.number3.setValue(""),this.confirmarForm.controls.number4.setValue(""),this.confirmarForm.controls.number5.setValue(""),this.confirmarForm.controls.number6.setValue("")}eventUp(a){const o=document.querySelector(`[id="number${a+1}"]`);6===a?""===this.confirmarForm.controls.number1.value&&this.confirmarForm.controls[`number${a}`].valid&&document.querySelector('[id="number1"]').focus():this.confirmarForm.controls[`number${a}`].valid&&o.focus()}}return m.\u0275fac=function(a){return new(a||m)(e.Y36(r.qu),e.Y36(g.e),e.Y36(_.F0),e.Y36(v.F),e.Y36(A.g))},m.\u0275cmp=e.Xpm({type:m,selectors:[["auth-confirmation-required"]],inputs:{email:"email"},decls:44,vars:16,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],[1,"md:flex","md:items-center","md:justify-center","w-full","sm:w-auto","md:h-full","md:w-full","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[2,"margin-left","20%"],[1,"w-50"],["src","assets/images/logo/logo-.png"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary","hover:underline",3,"routerLink"],[1,"text-3xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-4",3,"formGroup"],["forgotPasswordNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],["passwordField",""],[4,"ngIf"],[1,"font-medium","text-base"],[1,"flex","flex-row"],[1,"w-12","text-center"],["id","number1","matInput","","maxlength","1",3,"formControlName","keyup","paste"],[1,"w-12","ml-2","text-center"],["id","number2","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number3","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number4","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number5","matInput","","maxlength","1",3,"formControlName","keyup","paste"],["id","number6","matInput","","maxlength","1",3,"formControlName","keyup","paste"],[1,"mt-2","text-md","font-medium","text-secondary","text-right"],[1,"ml-1","text-black","hover:underline",3,"click"],[1,"flex","justify-center"],["mat-raised-button","",1,"submit-button","mt-2",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA()(),e.TgZ(6,"div",6)(7,"div"),e._uU(8,"Regresar a "),e.qZA(),e.TgZ(9,"a",7),e._uU(10,"iniciar sesi\xf3n "),e.qZA()(),e.TgZ(11,"div",8),e._uU(12,"Confirmar cuenta"),e.qZA(),e.TgZ(13,"form",9,10)(15,"mat-form-field",11)(16,"mat-label"),e._uU(17,"Correo electr\xf3nico"),e.qZA(),e._UZ(18,"input",12,13),e.YNc(20,s,2,0,"mat-error",14),e.YNc(21,E,2,0,"mat-error",14),e.qZA(),e.TgZ(22,"mat-label",15),e._uU(23,"C\xf3digo de verificaci\xf3n *"),e.qZA(),e.TgZ(24,"div",16)(25,"mat-form-field",17)(26,"input",18),e.NdJ("keyup",function(){return t.eventUp(1)})("paste",function(i){return t.onPaste(i)}),e.qZA()(),e.TgZ(27,"mat-form-field",19)(28,"input",20),e.NdJ("keyup",function(){return t.eventUp(2)})("paste",function(i){return t.onPaste(i)}),e.qZA()(),e.TgZ(29,"mat-form-field",19)(30,"input",21),e.NdJ("keyup",function(){return t.eventUp(3)})("paste",function(i){return t.onPaste(i)}),e.qZA()(),e.TgZ(31,"mat-form-field",19)(32,"input",22),e.NdJ("keyup",function(){return t.eventUp(4)})("paste",function(i){return t.onPaste(i)}),e.qZA()(),e.TgZ(33,"mat-form-field",19)(34,"input",23),e.NdJ("keyup",function(){return t.eventUp(5)})("paste",function(i){return t.onPaste(i)}),e.qZA()(),e.TgZ(35,"mat-form-field",19)(36,"input",24),e.NdJ("keyup",function(){return t.eventUp(6)})("paste",function(i){return t.onPaste(i)}),e.qZA()()(),e.TgZ(37,"div",25)(38,"a",26),e.NdJ("click",function(){return t.reenviarCodigo()}),e._uU(39," Reenviar c\xf3digo "),e.qZA()(),e.TgZ(40,"div",27)(41,"button",28),e.NdJ("click",function(){return t.onCodeConfirmation()}),e.YNc(42,I,2,0,"span",14),e.YNc(43,x,1,2,"mat-progress-spinner",29),e.qZA()()()()()()),2&a&&(e.xp6(9),e.Q6J("routerLink",e.DdM(15,q)),e.xp6(4),e.Q6J("formGroup",t.confirmarForm),e.xp6(5),e.Q6J("formControlName","email"),e.xp6(2),e.Q6J("ngIf",t.confirmarForm.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.confirmarForm.get("email").hasError("email")),e.xp6(5),e.Q6J("formControlName","number1"),e.xp6(2),e.Q6J("formControlName","number2"),e.xp6(2),e.Q6J("formControlName","number3"),e.xp6(2),e.Q6J("formControlName","number4"),e.xp6(2),e.Q6J("formControlName","number5"),e.xp6(2),e.Q6J("formControlName","number6"),e.xp6(5),e.Q6J("color","primary")("disabled",t.confirmarForm.disabled),e.xp6(1),e.Q6J("ngIf",!t.confirmarForm.disabled),e.xp6(1),e.Q6J("ngIf",t.confirmarForm.disabled))},directives:[_.yS,r._Y,r.JL,r.sg,f.KE,f.hX,T.Nt,r.Fj,r.JJ,r.u,h.O5,f.TO,r.nD,b.lW],encapsulation:2,data:{animation:C.L}}),m})()},8795:(R,c,n)=>{n.r(c),n.d(c,{AuthConfirmationRequiredModule:()=>b});var r=n(9826),C=n(7423),e=n(5804),g=n(4466),_=n(7322),v=n(5245),A=n(7531);const T=[{path:"confirm",component:n(4500).Q}];var h=n(5e3);let b=(()=>{class s{}return s.\u0275fac=function(I){return new(I||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[r.Bz.forChild(T),C.ot,e.J,_.lN,v.Ps,A.c,g.m]]}),s})()}}]);